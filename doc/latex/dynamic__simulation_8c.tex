\hypertarget{dynamic__simulation_8c}{}\doxysection{C\+:/\+Users/\+Work/git\+\_\+repo/elevator\+\_\+simulator/src/dynamic\+\_\+simulation.c File Reference}
\label{dynamic__simulation_8c}\index{C:/Users/Work/git\_repo/elevator\_simulator/src/dynamic\_simulation.c@{C:/Users/Work/git\_repo/elevator\_simulator/src/dynamic\_simulation.c}}


This file contains the definition of dynamic\+\_\+simulation The function contains the algorithm for dynamic release of the program.  


{\ttfamily \#include \char`\"{}functions.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include \char`\"{}dynamic\+\_\+functions.\+h\char`\"{}}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{dynamic__simulation_8c_afcfe2d3f6e5bbe7b911bb79801fc397e}{dynamic\+\_\+simulation}} (void)
\begin{DoxyCompactList}\small\item\em This function contains the working logic of the elevator array function for dynamic release. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the definition of dynamic\+\_\+simulation The function contains the algorithm for dynamic release of the program. 

\begin{DoxyAuthor}{Author}
Maaz Jamal 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{dynamic__simulation_8c_afcfe2d3f6e5bbe7b911bb79801fc397e}\label{dynamic__simulation_8c_afcfe2d3f6e5bbe7b911bb79801fc397e}} 
\index{dynamic\_simulation.c@{dynamic\_simulation.c}!dynamic\_simulation@{dynamic\_simulation}}
\index{dynamic\_simulation@{dynamic\_simulation}!dynamic\_simulation.c@{dynamic\_simulation.c}}
\doxysubsubsection{\texorpdfstring{dynamic\_simulation()}{dynamic\_simulation()}}
{\footnotesize\ttfamily int dynamic\+\_\+simulation (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



This function contains the working logic of the elevator array function for dynamic release. 

@detail Contains the logic for the dynamic version. It contains the main logic loop for travel of elevators .The loop for placing passengers on floors and the complete flow of the program. Plus additional functional calls for the dynamic release.

\begin{DoxyReturn}{Returns}
return 1 for successful completion. 
\end{DoxyReturn}
A boolean array that shows if elevator needs to stop at a floor. to pick a passenger.

Array conatining Elevators

Array to pointer of type passenger. Stores passengers on floors.

stores the passengers from input file.

main time counter

A queue of request made by passengers

Definition at line 25 of file dynamic\+\_\+simulation.\+c.


\begin{DoxyCode}{0}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \mbox{\hyperlink{globals_8h_a11ee4b54505479cda7e127a7030a76a7}{elevator\_count}} = -\/1;}
\DoxyCodeLine{29     \textcolor{keywordflow}{while} (\mbox{\hyperlink{globals_8h_a11ee4b54505479cda7e127a7030a76a7}{elevator\_count}} == -\/1)}
\DoxyCodeLine{30     \{}
\DoxyCodeLine{31         \mbox{\hyperlink{globals_8h_a11ee4b54505479cda7e127a7030a76a7}{elevator\_count}} = \mbox{\hyperlink{input__lifts_8h_a91439303ceb8c122f314f7b5203352df}{input\_lifts}}(1);}
\DoxyCodeLine{32     \}}
\DoxyCodeLine{33     \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}} = -\/1;}
\DoxyCodeLine{34 }
\DoxyCodeLine{35     \textcolor{keywordflow}{while} (\mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}} == -\/1)}
\DoxyCodeLine{36     \{}
\DoxyCodeLine{37         \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}} = \mbox{\hyperlink{input__floors_8h_ac21b8029a111342aa5dde9daa28b65cb}{input\_floors}}();}
\DoxyCodeLine{38     \}}
\DoxyCodeLine{39     \textcolor{keywordtype}{bool} *stop\_at\_floor\_global = (\textcolor{keywordtype}{bool} *)calloc(\mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}}, \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{bool})); }
\DoxyCodeLine{40     \textcolor{keyword}{struct }\mbox{\hyperlink{structelevator}{elevator}} *elevator\_arr = \mbox{\hyperlink{create__elevator__array_8h_a76f1fbfc724e769255d728ae2f2f1ae1}{create\_elevator\_array}}(\mbox{\hyperlink{globals_8h_a11ee4b54505479cda7e127a7030a76a7}{elevator\_count}});   }
\DoxyCodeLine{41     \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} **floor\_array = \mbox{\hyperlink{create__floor__array_8h_aa7321679c44d6dcf3ff9241a44ab38c1}{create\_floor\_array}}(\mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}});     }
\DoxyCodeLine{42     \mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} = \mbox{\hyperlink{count__passenger_8h_ae332544a6584743f5c1444e2495becfe}{count\_passenger}}();}
\DoxyCodeLine{43     \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} *passenger\_array = (\textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} *)calloc(\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \mbox{\hyperlink{structpassenger}{passenger}})); }
\DoxyCodeLine{44     \mbox{\hyperlink{read__passenger_8c_a37c372d14154c7f6d6d1af823cadf07d}{read\_passenger}}(passenger\_array);}
\DoxyCodeLine{45     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} t = 0;                       }
\DoxyCodeLine{46     \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} *passenger\_queue = NULL; }
\DoxyCodeLine{47 }
\DoxyCodeLine{48     \textcolor{keywordtype}{int} prev\_time\_index = 0;}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keywordtype}{bool} enable\_realtime = \textcolor{keyword}{false};  \textcolor{comment}{// Realtime or full-\/speed;}}
\DoxyCodeLine{51     \textcolor{keywordtype}{bool} enable\_user\_input = \textcolor{keyword}{true}; \textcolor{comment}{// ask user for input or not;}}
\DoxyCodeLine{52     \textcolor{keywordtype}{bool} exit\_main\_loop = \textcolor{keyword}{false};   \textcolor{comment}{// should we exit main loop if user orders simulation stop}}
\DoxyCodeLine{53     time\_t start\_time;}
\DoxyCodeLine{54     time\_t end\_time;}
\DoxyCodeLine{55     \textcolor{keywordtype}{int} time\_difference = 0;}
\DoxyCodeLine{56     \textcolor{keywordtype}{int} divisor = 200;}
\DoxyCodeLine{57     \textcolor{keywordflow}{while} (t < 2000) \textcolor{comment}{//86400 for whole day. Setting to 2000 since cli\_update slows the program down.}}
\DoxyCodeLine{58     \{}
\DoxyCodeLine{59 }
\DoxyCodeLine{60         \textcolor{keywordflow}{if} (t \% divisor == 0 \&\& enable\_user\_input)}
\DoxyCodeLine{61         \{                                                         \textcolor{comment}{//choices}}
\DoxyCodeLine{62             \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} temp\_passenger = \{0, 0, 0, 0, 0, 0\}; \textcolor{comment}{//To store the user entered passenger}}
\DoxyCodeLine{63             \textcolor{keywordtype}{int} stop\_input = 0;}
\DoxyCodeLine{64             \textcolor{keywordtype}{bool} incorrect\_choice = \textcolor{keyword}{true};}
\DoxyCodeLine{65             \textcolor{keywordflow}{while} (incorrect\_choice)}
\DoxyCodeLine{66             \{}
\DoxyCodeLine{67                 puts(\textcolor{stringliteral}{"CHOSE AMONG THE FOLLOWING CHOICES:"});}
\DoxyCodeLine{68                 puts(\textcolor{stringliteral}{"Note this is repeated after every approximately 30 seconds in realtime mode"});}
\DoxyCodeLine{69                 puts(\textcolor{stringliteral}{"and 200 iterations in non-\/realtime mode. Simulation starts in non-\/realtime mode."});}
\DoxyCodeLine{70                 puts(\textcolor{stringliteral}{"1-\/ Enter A Passenger Details."});}
\DoxyCodeLine{71                 puts(\textcolor{stringliteral}{"2-\/ Create an Emergency stop."});}
\DoxyCodeLine{72                 puts(\textcolor{stringliteral}{"3-\/ Enable/Disable realtime timer. "});}
\DoxyCodeLine{73                 puts(\textcolor{stringliteral}{"4-\/ Do not ask for input again \& Disable realtime timer."});}
\DoxyCodeLine{74                 puts(\textcolor{stringliteral}{"5-\/ Exit the simulation."});}
\DoxyCodeLine{75                 \textcolor{keywordtype}{int} user\_choice = 0;}
\DoxyCodeLine{76                 \textcolor{keywordflow}{while} (scanf(\textcolor{stringliteral}{"\%d"}, \&user\_choice) == 0)}
\DoxyCodeLine{77                 \{}
\DoxyCodeLine{78                     puts(\textcolor{stringliteral}{"Incorrect Choice Please Try Again."});}
\DoxyCodeLine{79                     scanf(\textcolor{stringliteral}{"\%*[\(\backslash\)n]"}); \textcolor{comment}{//discard all inputs until newline character}}
\DoxyCodeLine{80                 \}}
\DoxyCodeLine{81                 \textcolor{keywordflow}{if} (user\_choice > 0 \&\& user\_choice < 6)}
\DoxyCodeLine{82                 \{}
\DoxyCodeLine{83                     incorrect\_choice = \textcolor{keyword}{false}; \textcolor{comment}{//made correct choice no exit selection loop.}}
\DoxyCodeLine{84                     \textcolor{keywordflow}{switch} (user\_choice)}
\DoxyCodeLine{85                     \{}
\DoxyCodeLine{86 }
\DoxyCodeLine{87                     \textcolor{comment}{//1-\/ Enter A Passenger Details.}}
\DoxyCodeLine{88                     \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{89                         read\_user\_input\_validate(\&temp\_passenger, t);}
\DoxyCodeLine{90                         passenger\_queue = \mbox{\hyperlink{add__request__queue_8h_a1aa0db2f2ecae31eaf0fc492d19414c6}{add\_request\_queue}}(passenger\_queue, temp\_passenger);}
\DoxyCodeLine{91                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{92                     \textcolor{comment}{//2-\/ Create an Emergency stop.}}
\DoxyCodeLine{93                     \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{94                         emergency\_stop\_handling(elevator\_arr, \&t);}
\DoxyCodeLine{95                         \textcolor{keywordflow}{while} ((stop\_input = input\_after\_stop()) == -\/1)}
\DoxyCodeLine{96                         \{ \textcolor{comment}{//loop until we get right input}}
\DoxyCodeLine{97                         \};}
\DoxyCodeLine{98                         \textcolor{keywordflow}{if} (stop\_input == 0)}
\DoxyCodeLine{99                         \{}
\DoxyCodeLine{100                             exit\_main\_loop = \textcolor{keyword}{true};}
\DoxyCodeLine{101                         \}}
\DoxyCodeLine{102                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{103                     \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{104                         enable\_realtime = !enable\_realtime; \textcolor{comment}{//toggle}}
\DoxyCodeLine{105                         \textcolor{keywordflow}{if} (enable\_realtime)}
\DoxyCodeLine{106                         \{}
\DoxyCodeLine{107                             divisor = 30;}
\DoxyCodeLine{108                         \}}
\DoxyCodeLine{109                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{110                         \{}
\DoxyCodeLine{111                             divisor = 200;}
\DoxyCodeLine{112                         \}}
\DoxyCodeLine{113                         printf(\textcolor{stringliteral}{"Set Real-\/time to : \%d\(\backslash\)n"}, enable\_realtime);}
\DoxyCodeLine{114                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{115                     \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{116                         enable\_realtime = \textcolor{keyword}{false};}
\DoxyCodeLine{117                         enable\_user\_input = \textcolor{keyword}{false};}
\DoxyCodeLine{118                         exit\_main\_loop = \textcolor{keyword}{false};}
\DoxyCodeLine{119                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{120                     \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{121                         exit\_main\_loop = \textcolor{keyword}{true};}
\DoxyCodeLine{122                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{123                     \}}
\DoxyCodeLine{124                 \}}
\DoxyCodeLine{125             \}}
\DoxyCodeLine{126             \textcolor{keywordflow}{if} (exit\_main\_loop)}
\DoxyCodeLine{127             \{ \textcolor{comment}{//exit main loop;}}
\DoxyCodeLine{128                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{129             \}}
\DoxyCodeLine{130         \}}
\DoxyCodeLine{131         \textcolor{comment}{//set start time}}
\DoxyCodeLine{132         start\_time = time(NULL);}
\DoxyCodeLine{133         \textcolor{comment}{//update the cli}}
\DoxyCodeLine{134         \mbox{\hyperlink{cli__update_8h_a61dffc3815d70e783c61e48ec93bb2c9}{cli\_update}}(elevator\_arr, t);}
\DoxyCodeLine{135 }
\DoxyCodeLine{136         \textcolor{comment}{// Add passenger with current time step to queue}}
\DoxyCodeLine{137         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i\_pass = prev\_time\_index; i\_pass < \mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}}; i\_pass++) \textcolor{comment}{//debugged works perfectly}}
\DoxyCodeLine{138         \{}
\DoxyCodeLine{139             \textcolor{keywordflow}{if} (passenger\_array[i\_pass].\mbox{\hyperlink{structpassenger_a8dd292bfb4015a71df26b57eb23c8701}{arrival\_time}} < t) \textcolor{comment}{//due to emergency stop we can skip some entries}}
\DoxyCodeLine{140             \{}
\DoxyCodeLine{141                 \textcolor{keywordflow}{while} (passenger\_array[prev\_time\_index].\mbox{\hyperlink{structpassenger_a8dd292bfb4015a71df26b57eb23c8701}{arrival\_time}} < t \&\& prev\_time\_index < \mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}})}
\DoxyCodeLine{142                 \{}
\DoxyCodeLine{143                     prev\_time\_index++; \textcolor{comment}{//increment until we reach passenger with current or greater arrival\_time then  t or reach end array.}}
\DoxyCodeLine{144                 \}}
\DoxyCodeLine{145             \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147             \textcolor{comment}{//Assume the passenger\_array is sorted by arrival time.}}
\DoxyCodeLine{148             \textcolor{comment}{//prev\_time\_index prevents us from starting at previous index}}
\DoxyCodeLine{149             \textcolor{keywordflow}{if} (passenger\_array[i\_pass].\mbox{\hyperlink{structpassenger_a8dd292bfb4015a71df26b57eb23c8701}{arrival\_time}} == t)}
\DoxyCodeLine{150             \{}
\DoxyCodeLine{151 }
\DoxyCodeLine{152                 passenger\_queue = \mbox{\hyperlink{add__request__queue_8h_a1aa0db2f2ecae31eaf0fc492d19414c6}{add\_request\_queue}}(passenger\_queue, passenger\_array[i\_pass]);}
\DoxyCodeLine{153                 prev\_time\_index++;}
\DoxyCodeLine{154             \}}
\DoxyCodeLine{155             \textcolor{keywordflow}{else}}
\DoxyCodeLine{156             \{}
\DoxyCodeLine{157                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{158             \}}
\DoxyCodeLine{159         \}}
\DoxyCodeLine{160 }
\DoxyCodeLine{161         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{globals_8h_a11ee4b54505479cda7e127a7030a76a7}{elevator\_count}}; i++)}
\DoxyCodeLine{162         \{}
\DoxyCodeLine{163 }
\DoxyCodeLine{164             \textcolor{keywordflow}{if} (\mbox{\hyperlink{is__lift__on__floor_8h_a8331ecca3b0a14f407e7e9e354d01998}{is\_lift\_on\_floor}}(elevator\_arr, i))}
\DoxyCodeLine{165             \{}
\DoxyCodeLine{166                 \textcolor{keywordtype}{int} drop\_delay = 0;}
\DoxyCodeLine{167                 \textcolor{keywordtype}{int} add\_delay = 0;}
\DoxyCodeLine{168                 \textcolor{keywordtype}{int} stop\_change = elevator\_arr[i].\mbox{\hyperlink{structelevator_a2c87ee6189da284a149438ce8b0acc8d}{cur\_floor}} -\/ 1;}
\DoxyCodeLine{169                 \textcolor{keywordflow}{if} (elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} > 0)}
\DoxyCodeLine{170                 \{}
\DoxyCodeLine{171                     \textcolor{keywordflow}{if} (elevator\_arr[i].stop\_at\_floor[stop\_change])}
\DoxyCodeLine{172                     \{ \textcolor{comment}{//remove any passengers that need to get off}}
\DoxyCodeLine{173                         drop\_delay = \mbox{\hyperlink{passengers__drop_8h_a11a7b91c4b20588fd46ab8e9c9df46e1}{passengers\_drop}}(elevator\_arr, i, elevator\_arr[i].cur\_floor, t);}
\DoxyCodeLine{174 }
\DoxyCodeLine{175                         \textcolor{keywordflow}{if} (drop\_delay > 0 || elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} >= elevator\_arr[i].max\_passenger) \textcolor{comment}{//dropped passengers here or lift full}}
\DoxyCodeLine{176                         \{}
\DoxyCodeLine{177                             elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[stop\_change] = \textcolor{keyword}{false}; \textcolor{comment}{//dropped passengers here}}
\DoxyCodeLine{178                         \}}
\DoxyCodeLine{179                     \}}
\DoxyCodeLine{180                 \}}
\DoxyCodeLine{181                 \textcolor{keywordflow}{if} (elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} < elevator\_arr[i].max\_passenger)}
\DoxyCodeLine{182                 \{}
\DoxyCodeLine{183 }
\DoxyCodeLine{184                     add\_delay = \mbox{\hyperlink{passengers__take__in_8h_ad76f630c9b48489803eeb11079f324a5}{passengers\_take\_in}}(elevator\_arr, i, floor\_array, elevator\_arr[i].cur\_floor, t);}
\DoxyCodeLine{185                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[stop\_change] = \textcolor{keyword}{false};}
\DoxyCodeLine{186                     \textcolor{keywordflow}{if} (floor\_array[stop\_change] == NULL)}
\DoxyCodeLine{187                     \{}
\DoxyCodeLine{188                         stop\_at\_floor\_global[stop\_change] = \textcolor{keyword}{false};}
\DoxyCodeLine{189                     \}}
\DoxyCodeLine{190                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{191                     \{ \textcolor{comment}{//happens in case the lift gets full and their are still passengers on floor.}}
\DoxyCodeLine{192                         stop\_at\_floor\_global[stop\_change] = \textcolor{keyword}{true};}
\DoxyCodeLine{193                     \}}
\DoxyCodeLine{194                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[stop\_change] = \textcolor{keyword}{false}; \textcolor{comment}{//lift has taken in or dropped passengers or is full and has completed it purpose on floor so we set to false.}}
\DoxyCodeLine{195                 \}}
\DoxyCodeLine{196                 \textcolor{keywordtype}{int} total\_delay = 2 * drop\_delay + 2 * add\_delay;}
\DoxyCodeLine{197                 elevator\_arr[i].\mbox{\hyperlink{structelevator_a6272f86a10a9c4bf565e184a4537373d}{timer}} += total\_delay;}
\DoxyCodeLine{198             \}}
\DoxyCodeLine{199 }
\DoxyCodeLine{200             \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} *cur = passenger\_queue;}
\DoxyCodeLine{201             \textcolor{keywordtype}{int} index = 0;}
\DoxyCodeLine{202             \textcolor{keywordflow}{while} (cur != NULL)}
\DoxyCodeLine{203             \{ \textcolor{comment}{//iterating over passenger queue}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205                 \textcolor{keywordtype}{bool} direction\_up = (cur-\/>\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} <= cur-\/>\mbox{\hyperlink{structpassenger_a1cd2d080a6795d30505e8722d329c7e2}{dest\_floor}}); \textcolor{comment}{//passenger direction up}}
\DoxyCodeLine{206                 \textcolor{keywordtype}{bool} direction\_down = (cur-\/>\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} >= cur-\/>\mbox{\hyperlink{structpassenger_a1cd2d080a6795d30505e8722d329c7e2}{dest\_floor}});}
\DoxyCodeLine{207                 \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up == direction\_up || elevator\_arr[i].direction\_down == direction\_down)}
\DoxyCodeLine{208                 \{}
\DoxyCodeLine{209                     \textcolor{keywordtype}{bool} is\_above = cur-\/>\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} >= elevator\_arr[i].\mbox{\hyperlink{structelevator_a2c87ee6189da284a149438ce8b0acc8d}{cur\_floor}};}
\DoxyCodeLine{210                     \textcolor{keywordtype}{bool} is\_below = cur-\/>\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} <= elevator\_arr[i].\mbox{\hyperlink{structelevator_a2c87ee6189da284a149438ce8b0acc8d}{cur\_floor}};}
\DoxyCodeLine{211                     \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up == is\_above || elevator\_arr[i].direction\_down == is\_below)}
\DoxyCodeLine{212                     \{ \textcolor{comment}{//elevator can pick this person up}}
\DoxyCodeLine{213                         \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} temp = *cur;}
\DoxyCodeLine{214                         temp.\mbox{\hyperlink{structpassenger_a74a0c954cb7d0e4590b0a2715a768348}{next}} = NULL;                                 \textcolor{comment}{// removing this from passenger queue list}}
\DoxyCodeLine{215                         \textcolor{keywordtype}{int} arrival\_floor\_index = temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1; \textcolor{comment}{//-\/1 because of mismatch between array and input file}}
\DoxyCodeLine{216 }
\DoxyCodeLine{217                         \mbox{\hyperlink{add__passenger__floor_8h_aba6a961fa1c1d9922c13b66c973fa62d}{add\_passenger\_floor}}(floor\_array, arrival\_floor\_index, temp);}
\DoxyCodeLine{218                         stop\_at\_floor\_global[temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1] = \textcolor{keyword}{true};}
\DoxyCodeLine{219                         passenger\_queue = \mbox{\hyperlink{remove__passenger__queue_8h_aaf649634b0615e3c784050409bd55e58}{remove\_passenger\_queue}}(index, passenger\_queue);}
\DoxyCodeLine{220                         index-\/-\/; \textcolor{comment}{//list is smaller by one node.}}
\DoxyCodeLine{221                     \}}
\DoxyCodeLine{222                 \}}
\DoxyCodeLine{223 }
\DoxyCodeLine{224                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{225                 \{}
\DoxyCodeLine{226                     \textcolor{comment}{//is elevator at top floor}}
\DoxyCodeLine{227                     \textcolor{keywordflow}{if} (elevator\_arr[i].cur\_floor == \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}})}
\DoxyCodeLine{228                     \{}
\DoxyCodeLine{229                         \textcolor{comment}{//change direction to move down}}
\DoxyCodeLine{230                         \textcolor{keywordtype}{int} success = \mbox{\hyperlink{moving__lift__down_8h_a71965ccfee77f7e7469f4153836fb7ef}{moving\_lift\_down}}(elevator\_arr, i);}
\DoxyCodeLine{231                         \textcolor{keywordflow}{if} (success == -\/1)}
\DoxyCodeLine{232                         \{}
\DoxyCodeLine{233                             fprintf(stderr, \textcolor{stringliteral}{"Could not change direction of elevator to Down. \(\backslash\)n"});}
\DoxyCodeLine{234                         \}}
\DoxyCodeLine{235                         \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} temp = *cur;}
\DoxyCodeLine{236                         temp.\mbox{\hyperlink{structpassenger_a74a0c954cb7d0e4590b0a2715a768348}{next}} = NULL; \textcolor{comment}{// removing this from passenger queue list}}
\DoxyCodeLine{237 }
\DoxyCodeLine{238                         \textcolor{keywordtype}{int} arrival\_floor\_index = temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1;}
\DoxyCodeLine{239                         \mbox{\hyperlink{add__passenger__floor_8h_aba6a961fa1c1d9922c13b66c973fa62d}{add\_passenger\_floor}}(floor\_array, arrival\_floor\_index, temp);}
\DoxyCodeLine{240                         stop\_at\_floor\_global[temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1] = \textcolor{keyword}{true};}
\DoxyCodeLine{241                         passenger\_queue = \mbox{\hyperlink{remove__passenger__queue_8h_aaf649634b0615e3c784050409bd55e58}{remove\_passenger\_queue}}(index, passenger\_queue);}
\DoxyCodeLine{242                         index-\/-\/; \textcolor{comment}{//list is smaller by one node.}}
\DoxyCodeLine{243                     \}}
\DoxyCodeLine{244 }
\DoxyCodeLine{245                     \textcolor{comment}{//is elevator at ground floor. Can cause issues at start.}}
\DoxyCodeLine{246                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elevator\_arr[i].cur\_floor == 1)}
\DoxyCodeLine{247                     \{}
\DoxyCodeLine{248                         \textcolor{comment}{//change direction to move up}}
\DoxyCodeLine{249                         moving\_lift\_up(elevator\_arr, i);}
\DoxyCodeLine{250                         \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} temp = *cur;}
\DoxyCodeLine{251                         temp.\mbox{\hyperlink{structpassenger_a74a0c954cb7d0e4590b0a2715a768348}{next}} = NULL; \textcolor{comment}{// removing this from passenger queue list}}
\DoxyCodeLine{252 }
\DoxyCodeLine{253                         \textcolor{keywordtype}{int} arrival\_floor\_index = temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1;}
\DoxyCodeLine{254                         \mbox{\hyperlink{add__passenger__floor_8h_aba6a961fa1c1d9922c13b66c973fa62d}{add\_passenger\_floor}}(floor\_array, arrival\_floor\_index, temp);}
\DoxyCodeLine{255                         stop\_at\_floor\_global[temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1] = \textcolor{keyword}{true};}
\DoxyCodeLine{256                         passenger\_queue = \mbox{\hyperlink{remove__passenger__queue_8h_aaf649634b0615e3c784050409bd55e58}{remove\_passenger\_queue}}(index, passenger\_queue);}
\DoxyCodeLine{257                         index-\/-\/; \textcolor{comment}{//list is smaller by one node.}}
\DoxyCodeLine{258                     \}}
\DoxyCodeLine{259 }
\DoxyCodeLine{260                     \textcolor{keywordflow}{else} \textcolor{comment}{//passenger in lift go in opposite direction of the lift}}
\DoxyCodeLine{261                     \{}
\DoxyCodeLine{262                         \textcolor{comment}{// bool to check if elevator and passenger inside are travelling in same direction}}
\DoxyCodeLine{263                         \textcolor{keywordtype}{bool} passenger\_elevator\_dir = \textcolor{keyword}{false};}
\DoxyCodeLine{264                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < elevator\_arr[i].\mbox{\hyperlink{structelevator_a35976c62fece1a1887b39d2761e409e3}{passenger\_count}}; j++)}
\DoxyCodeLine{265                         \{}
\DoxyCodeLine{266                             \textcolor{keywordflow}{if} (elevator\_arr[i].passenger\_arr[j].\mbox{\hyperlink{structpassenger_a8af124b4de91150e204a2374e98ee71f}{in\_elevator}})}
\DoxyCodeLine{267                             \{}
\DoxyCodeLine{268                                 \textcolor{keywordtype}{bool} up = elevator\_arr[i].\mbox{\hyperlink{structelevator_ab3f0430781fbb878267214945aaf9322}{passenger\_arr}}[j].\mbox{\hyperlink{structpassenger_a1cd2d080a6795d30505e8722d329c7e2}{dest\_floor}} > elevator\_arr[i].\mbox{\hyperlink{structelevator_ab3f0430781fbb878267214945aaf9322}{passenger\_arr}}[j].\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}};}
\DoxyCodeLine{269                                 \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up == up || elevator\_arr[i].direction\_down != up)}
\DoxyCodeLine{270                                 \{}
\DoxyCodeLine{271                                     passenger\_elevator\_dir = \textcolor{keyword}{true};}
\DoxyCodeLine{272                                     \textcolor{keywordflow}{break};}
\DoxyCodeLine{273                                 \}}
\DoxyCodeLine{274                             \}}
\DoxyCodeLine{275                         \}}
\DoxyCodeLine{276 }
\DoxyCodeLine{277                         \textcolor{comment}{//if no passengers are travelling in direction of lift change lift direction}}
\DoxyCodeLine{278                         \textcolor{keywordflow}{if} (!passenger\_elevator\_dir)}
\DoxyCodeLine{279                         \{}
\DoxyCodeLine{280                             \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up)}
\DoxyCodeLine{281                             \{}
\DoxyCodeLine{282                                 \mbox{\hyperlink{moving__lift__down_8h_a71965ccfee77f7e7469f4153836fb7ef}{moving\_lift\_down}}(elevator\_arr, i);}
\DoxyCodeLine{283                             \}}
\DoxyCodeLine{284                             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_down)}
\DoxyCodeLine{285                             \{}
\DoxyCodeLine{286                                 moving\_lift\_up(elevator\_arr, i);}
\DoxyCodeLine{287                             \}}
\DoxyCodeLine{288 }
\DoxyCodeLine{289                             \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} temp = *cur;}
\DoxyCodeLine{290                             temp.\mbox{\hyperlink{structpassenger_a74a0c954cb7d0e4590b0a2715a768348}{next}} = NULL; \textcolor{comment}{// removing this from passenger queue list}}
\DoxyCodeLine{291 }
\DoxyCodeLine{292                             \textcolor{keywordtype}{int} arrival\_floor\_index = temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1;}
\DoxyCodeLine{293                             \mbox{\hyperlink{add__passenger__floor_8h_aba6a961fa1c1d9922c13b66c973fa62d}{add\_passenger\_floor}}(floor\_array, arrival\_floor\_index, temp);}
\DoxyCodeLine{294                             stop\_at\_floor\_global[temp.\mbox{\hyperlink{structpassenger_a0a31a3de4943a83121587e2d11b3e2c0}{arrival\_floor}} -\/ 1] = \textcolor{keyword}{true};}
\DoxyCodeLine{295                             passenger\_queue = \mbox{\hyperlink{remove__passenger__queue_8h_aaf649634b0615e3c784050409bd55e58}{remove\_passenger\_queue}}(index, passenger\_queue);}
\DoxyCodeLine{296                             index-\/-\/; \textcolor{comment}{//list is smaller by one node.}}
\DoxyCodeLine{297                         \}}
\DoxyCodeLine{298                     \}}
\DoxyCodeLine{299                 \}}
\DoxyCodeLine{300 }
\DoxyCodeLine{301                 \textcolor{comment}{//potential bug here due to deleting nodes in remove\_passenger\_queue}}
\DoxyCodeLine{302 }
\DoxyCodeLine{303                 cur = passenger\_queue; \textcolor{comment}{//bug fix start}}
\DoxyCodeLine{304                 \textcolor{keywordflow}{if} (cur != NULL)       \textcolor{comment}{//incase we deleted only node queue}}
\DoxyCodeLine{305                 \{}
\DoxyCodeLine{306                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} q\_index = 0; q\_index < index + 1; q\_index++)}
\DoxyCodeLine{307                     \{}
\DoxyCodeLine{308                         cur = cur-\/>\mbox{\hyperlink{structpassenger_a74a0c954cb7d0e4590b0a2715a768348}{next}}; \textcolor{comment}{//iterate until we reach the spot of deletion}}
\DoxyCodeLine{309                     \}}
\DoxyCodeLine{310                 \} \textcolor{comment}{//bug fix end}}
\DoxyCodeLine{311                 index++;}
\DoxyCodeLine{312 }
\DoxyCodeLine{313             \} \textcolor{comment}{//End of while loop iterating over queue}}
\DoxyCodeLine{314 }
\DoxyCodeLine{315             \textcolor{comment}{//move elevator here}}
\DoxyCodeLine{316             \textcolor{keywordflow}{if} (elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} > 0) \textcolor{comment}{//if there are passengers then lift needs to move}}
\DoxyCodeLine{317             \{}
\DoxyCodeLine{318                 elevator\_arr[i].\mbox{\hyperlink{structelevator_a186590570ed9fee16200f9fffd3a0873}{moving}} = \textcolor{keyword}{true};}
\DoxyCodeLine{319                 elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{true};}
\DoxyCodeLine{320             \}}
\DoxyCodeLine{321             \textcolor{keywordflow}{else}}
\DoxyCodeLine{322             \{}
\DoxyCodeLine{323                 elevator\_arr[i].\mbox{\hyperlink{structelevator_a186590570ed9fee16200f9fffd3a0873}{moving}} = \textcolor{keyword}{false}; \textcolor{comment}{//elevator is stopped and empty now}}
\DoxyCodeLine{324                 \textcolor{keywordflow}{if} (elevator\_arr[i].timer != 0)}
\DoxyCodeLine{325                 \{}
\DoxyCodeLine{326                     elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{true}; \textcolor{comment}{//time for passenger to drop out.}}
\DoxyCodeLine{327                 \}}
\DoxyCodeLine{328                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{329                 \{}
\DoxyCodeLine{330                     elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{false}; \textcolor{comment}{//elevator is stationary at current floor and can be used again.}}
\DoxyCodeLine{331                     \textcolor{keywordflow}{if} (elevator\_arr[i].cur\_floor == 1)}
\DoxyCodeLine{332                     \{ \textcolor{comment}{//elevator at ground floor can only move up.}}
\DoxyCodeLine{333                         moving\_lift\_up(elevator\_arr, i);}
\DoxyCodeLine{334                     \}}
\DoxyCodeLine{335                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elevator\_arr[i].cur\_floor == \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}}) \textcolor{comment}{//At top floor and can only move down}}
\DoxyCodeLine{336                     \{}
\DoxyCodeLine{337                         \mbox{\hyperlink{moving__lift__down_8h_a71965ccfee77f7e7469f4153836fb7ef}{moving\_lift\_down}}(elevator\_arr, i);}
\DoxyCodeLine{338                     \}}
\DoxyCodeLine{339                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{340                     \{ \textcolor{comment}{//elevator in middle can go anywhere}}
\DoxyCodeLine{341                         elevator\_arr[i].\mbox{\hyperlink{structelevator_a78d725b14370d8b2000a99bd11755ff8}{direction\_up}} = \textcolor{keyword}{true};}
\DoxyCodeLine{342                         elevator\_arr[i].\mbox{\hyperlink{structelevator_aa773f94528363621939e5fcc99dcc6ad}{direction\_down}} = \textcolor{keyword}{true};}
\DoxyCodeLine{343                     \}}
\DoxyCodeLine{344                 \}}
\DoxyCodeLine{345             \}}
\DoxyCodeLine{346 }
\DoxyCodeLine{347             \textcolor{keywordflow}{if} (elevator\_arr[i].timer > 0)}
\DoxyCodeLine{348             \{}
\DoxyCodeLine{349                 elevator\_arr[i].\mbox{\hyperlink{structelevator_a6272f86a10a9c4bf565e184a4537373d}{timer}}-\/-\/;}
\DoxyCodeLine{350             \}}
\DoxyCodeLine{351             \textcolor{keywordflow}{if} (elevator\_arr[i].timer == 0)}
\DoxyCodeLine{352             \{ \textcolor{comment}{//we may need to move to another floor}}
\DoxyCodeLine{353                 \textcolor{keywordtype}{int} current\_floor = elevator\_arr[i].\mbox{\hyperlink{structelevator_a2c87ee6189da284a149438ce8b0acc8d}{cur\_floor}};}
\DoxyCodeLine{354                 \textcolor{keywordtype}{bool} passengers\_above = \textcolor{keyword}{false}; \textcolor{comment}{//are there passengers above for drop or pickup?}}
\DoxyCodeLine{355                 \textcolor{keywordtype}{bool} passengers\_below = \textcolor{keyword}{false}; \textcolor{comment}{//are there passengers below for drop or pickup?}}
\DoxyCodeLine{356                 \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up)}
\DoxyCodeLine{357                 \{}
\DoxyCodeLine{358                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = current\_floor; k < \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}}; k++) \textcolor{comment}{//start at current floor and search up}}
\DoxyCodeLine{359                     \{                                                 \textcolor{comment}{//k = current floor becuse searching up and array numbering starts from 0 so curent\_floor as index is 1 floor above}}
\DoxyCodeLine{360                         \textcolor{comment}{//if we are below a floor and need to stop on it to drop a passenger.}}
\DoxyCodeLine{361                         \textcolor{keywordtype}{bool} condition\_a = elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[k];}
\DoxyCodeLine{362                         \textcolor{comment}{// if we are below a floor and neee to stop on it to pick a passenger.}}
\DoxyCodeLine{363                         \textcolor{keywordtype}{bool} condition\_b = stop\_at\_floor\_global[k];}
\DoxyCodeLine{364                         \textcolor{keywordflow}{if} (condition\_a || condition\_b)}
\DoxyCodeLine{365                         \{}
\DoxyCodeLine{366                             passengers\_above = \textcolor{keyword}{true};}
\DoxyCodeLine{367                             elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[k] = \textcolor{keyword}{true};}
\DoxyCodeLine{368                             stop\_at\_floor\_global[k] = \textcolor{keyword}{false}; \textcolor{comment}{//lift assigned to this floor}}
\DoxyCodeLine{369                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{370                         \}}
\DoxyCodeLine{371                     \}}
\DoxyCodeLine{372                 \}}
\DoxyCodeLine{373                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_down)}
\DoxyCodeLine{374                 \{}
\DoxyCodeLine{375                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = current\_floor -\/ 2; k >= 0; k-\/-\/)}
\DoxyCodeLine{376                     \{ \textcolor{comment}{//current\_floor-\/2 because of array numbering and file numbering mismatch}}
\DoxyCodeLine{377                         \textcolor{comment}{//if we are above a floor and need to stop on it to drop passengers.}}
\DoxyCodeLine{378                         \textcolor{keywordtype}{bool} condition\_a = elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[k];}
\DoxyCodeLine{379                         \textcolor{comment}{//if we are above a floor and need to stop on it to pick a passenger.}}
\DoxyCodeLine{380                         \textcolor{keywordtype}{bool} condition\_b = stop\_at\_floor\_global[k];}
\DoxyCodeLine{381                         \textcolor{keywordflow}{if} (condition\_a || condition\_b)}
\DoxyCodeLine{382                         \{}
\DoxyCodeLine{383                             passengers\_below = \textcolor{keyword}{true};}
\DoxyCodeLine{384                             elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[k] = \textcolor{keyword}{true};}
\DoxyCodeLine{385                             stop\_at\_floor\_global[k] = \textcolor{keyword}{false}; \textcolor{comment}{//lift assigned to this floor}}
\DoxyCodeLine{386 }
\DoxyCodeLine{387                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{388                         \}}
\DoxyCodeLine{389                     \}}
\DoxyCodeLine{390                 \}}
\DoxyCodeLine{391 }
\DoxyCodeLine{392                 \textcolor{keywordflow}{if} (passengers\_above)}
\DoxyCodeLine{393                 \{}
\DoxyCodeLine{394                     current\_floor++;}
\DoxyCodeLine{395                 \}}
\DoxyCodeLine{396                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (passengers\_below)}
\DoxyCodeLine{397                 \{}
\DoxyCodeLine{398                     current\_floor-\/-\/;}
\DoxyCodeLine{399                 \}}
\DoxyCodeLine{400                 elevator\_arr[i].\mbox{\hyperlink{structelevator_a2c87ee6189da284a149438ce8b0acc8d}{cur\_floor}} = current\_floor; \textcolor{comment}{//changed the floor}}
\DoxyCodeLine{401                 \textcolor{keywordflow}{if} (elevator\_arr[i].stop\_at\_floor[current\_floor -\/ 1] || stop\_at\_floor\_global[current\_floor -\/ 1])}
\DoxyCodeLine{402                 \{ \textcolor{comment}{//do we need to stop at this floor}}
\DoxyCodeLine{403                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a186590570ed9fee16200f9fffd3a0873}{moving}} = \textcolor{keyword}{false};}
\DoxyCodeLine{404                     elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{false};}
\DoxyCodeLine{405                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a47d71912bc6a97bcf1a7c8c257ed4df1}{stop\_at\_floor}}[current\_floor -\/ 1] = \textcolor{keyword}{true}; \textcolor{comment}{//setting to true so that the lift stops at this floor}}
\DoxyCodeLine{406                                                                              \textcolor{comment}{//stop\_at\_floor\_global[current\_floor -\/ 1] = false;}}
\DoxyCodeLine{407                 \}}
\DoxyCodeLine{408                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (passengers\_above || passengers\_below) \textcolor{comment}{//we do not need to stop at this floor.}}
\DoxyCodeLine{409                 \{}
\DoxyCodeLine{410                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a186590570ed9fee16200f9fffd3a0873}{moving}} = \textcolor{keyword}{true};}
\DoxyCodeLine{411                     elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{true};}
\DoxyCodeLine{412                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a6272f86a10a9c4bf565e184a4537373d}{timer}} += 3; \textcolor{comment}{//add 3 sec till next floor}}
\DoxyCodeLine{413                 \}}
\DoxyCodeLine{414                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{415                 \{}
\DoxyCodeLine{416                     elevator\_arr[i].\mbox{\hyperlink{structelevator_a186590570ed9fee16200f9fffd3a0873}{moving}} = \textcolor{keyword}{false};}
\DoxyCodeLine{417                     elevator\_arr[i].\mbox{\hyperlink{structelevator_ab012a8d2102934af9ea97effdeea80cf}{between\_floor}} = \textcolor{keyword}{false};}
\DoxyCodeLine{418                 \}}
\DoxyCodeLine{419 }
\DoxyCodeLine{420                 \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_up \&\& !passengers\_above)}
\DoxyCodeLine{421                 \{ \textcolor{comment}{//if no passengers above then lift should change direction to down.}}
\DoxyCodeLine{422                     \textcolor{keywordflow}{if} (current\_floor != 1 \&\& elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} > 0)}
\DoxyCodeLine{423                     \{}
\DoxyCodeLine{424                         \mbox{\hyperlink{moving__lift__down_8h_a71965ccfee77f7e7469f4153836fb7ef}{moving\_lift\_down}}(elevator\_arr, i);}
\DoxyCodeLine{425                     \}}
\DoxyCodeLine{426                 \}}
\DoxyCodeLine{427                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elevator\_arr[i].direction\_down \&\& !passengers\_below)}
\DoxyCodeLine{428                 \{}
\DoxyCodeLine{429                     \textcolor{keywordflow}{if} (current\_floor != \mbox{\hyperlink{globals_8h_adcbcca2d0621f8f94d7ccc4d81ca6f37}{floor\_count}} \&\& elevator\_arr[i].\mbox{\hyperlink{globals_8h_aafbf17dfb8c07dadb99b3e0faadef32d}{passenger\_count}} > 0)}
\DoxyCodeLine{430                     \{}
\DoxyCodeLine{431                         moving\_lift\_up(elevator\_arr, i);}
\DoxyCodeLine{432                     \}}
\DoxyCodeLine{433                 \}}
\DoxyCodeLine{434             \}}
\DoxyCodeLine{435 }
\DoxyCodeLine{436         \} \textcolor{comment}{//end of elevator loop}}
\DoxyCodeLine{437 }
\DoxyCodeLine{438         end\_time = time(NULL);}
\DoxyCodeLine{439         time\_difference = 0;}
\DoxyCodeLine{440         \textcolor{keywordflow}{while} (time\_difference < 1 \&\& enable\_realtime)}
\DoxyCodeLine{441         \{ \textcolor{comment}{//wait one second}}
\DoxyCodeLine{442             end\_time = time(NULL);}
\DoxyCodeLine{443             time\_difference = end\_time -\/ start\_time;}
\DoxyCodeLine{444         \}}
\DoxyCodeLine{445         t++;}
\DoxyCodeLine{446     \}}
\DoxyCodeLine{447     \textcolor{keyword}{struct }\mbox{\hyperlink{structpassenger}{passenger}} dummy;             \textcolor{comment}{//placeholder to pass to log. it should not be used.}}
\DoxyCodeLine{448     \mbox{\hyperlink{travel__log__file_8h_af8d5fde3cc01745bf27550d1fb69bf3f}{travel\_log\_file}}(dummy, 0, 0, 3); \textcolor{comment}{//choose mode to write max,avg time to file.}}
\DoxyCodeLine{449     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{450 \}}

\end{DoxyCode}
